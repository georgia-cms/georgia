<%= content_for :messages do %>
<%= render 'georgia/shared/messages', model: @page %>
<% end %>

<div id='edit_page_panel'>
  <%= simple_form_for @page, html: {class: 'form-vertical', data: {'page-id' => @page.id}} do |f| %>
  <div class='row-fluid'>
    <div class='span2'>
      <div class='well'>
        <ul class="nav nav-list">
          <li class="nav-header">Content</li>
          <% @page.contents.each do |content| %>
          <li class='<%= 'active' if content.locale == current_locale %>'>
            <a href="#<%= content.locale %>" data-toggle="tab">
              <%= icon_tag('icon-file') %> <%= locale_name(content.locale) %>
            </a>
          </li>
          <% end -%>
          <li class="nav-header">Other</li>
          <li><a href="#hierarchy" data-toggle="tab"><%= icon_tag('icon-list-alt') %> Hierarchy</a></li>
          <li><a href="#slideshow" data-toggle="tab"><%= icon_tag('icon-picture') %> Slideshow</a></li>
          <li><a href="#widgets" data-toggle="tab"><%= icon_tag('icon-briefcase') %> Widgets</a></li>
          <li><a href="#revisions" data-toggle="tab"><%= icon_tag('icon-tags') %> Revisions</a></li>
          <li><a href="#settings" data-toggle="tab"><%= icon_tag('icon-cogs') %> Settings</a></li>
          <% unless @page.new_record? %>
          <li class="nav-header">Actions</li>
          <li><%= link_to_preview @page %></li>
          <li><%= link_to_publish @page %></li>
          <li><%= link_to_unpublish @page %></li>
          <li><%= link_to_review @page %></li>
          <li><%= link_to_delete @page %></li>
          <% end -%>
        </ul>
      </div>
    </div>
    <div class='span10'>

      <div class="tab-content">

        <%= f.simple_fields_for :contents do |c| %>
        <%= render 'georgia/pages/content_fields', f: c, locale: c.object.locale %>
        <% end -%>

        <div class="tab-pane" id="slideshow" data-locales='<%= I18n.available_locales.join(',') %>'>
          <!-- Backbone Slideshow Panel --> Loading ...
        </div>

        <div class='tab-pane' id='hierarchy'>
          <%= render 'georgia/pages/hierarchy_fields', f: f %>
        </div>

        <div class='tab-pane' id='widgets' data-locales='<%= I18n.available_locales.join(',') %>'>
          <!-- Backbone Widgets Panel --> Loading ...
        </div>

        <div class='tab-pane' id='revisions'>
          <%= render 'georgia/pages/revisions' %>
        </div>

        <div class="tab-pane" id="settings">
          <%= render 'main_fields', f: f %>
        </div>

      </div>

    </div>
  </div>
  <% end %>
</div>


<%= content_for :ujs do %>
<script type="text/javascript">
$(function() { Georgia.init(); });
</script>
<% end -%>